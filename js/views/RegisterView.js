define("views/RegisterView",["jquery","backbone","fitness","customCodeClient"],function(e,t,n,r){var i=t.View.extend({initialize:function(){this.render()},events:{"click #register_submit":"registerSubmit"},render:function(){var t=e("#register_template"),n=e("#header_template");this.$el.empty(),this.$el.append(n.html()).append(t.html()),this.$el.trigger("create");var r=localStorage.getItem("lastEmail");return r&&e("#register_email").val(r),this},registerSubmit:function(){var t=e("#register_email").val();t&&localStorage.setItem("lastEmail",t);var i=e("#new_password").val(),s=e("#confirm_password").val();if(i!==s){n.showMessage("Passwords do not match");return}e.mobile.loading("show"),r.createStackmobUser(t,i,function(t,r){t?(e.mobile.loading("hide"),n.user=r,n.user.get("username")&&localStorage.setItem("username",n.user.get("username")),router.navigate("auth",!0)):(e.mobile.loading("hide"),n.showMessage("Failed to save user:\n"+r))})}});return i});