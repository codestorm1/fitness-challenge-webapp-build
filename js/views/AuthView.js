define("views/AuthView",["jquery","backbone","fitness","customCodeClient"],function(e,t,n,r){var i=t.View.extend({initialize:function(){this.render()},events:{"click #authorize_link":"authorize"},render:function(){var t=e("#header_template"),n=e("#auth_template");return this.$el.empty(),this.$el.append(t.html()).append(n.html()),this.$el.trigger("create"),this},authorize:function(){localStorage.removeItem("request_token"),localStorage.removeItem("request_token_secret"),e.mobile.loading("show"),r.getFitbitRequestToken(n.user.get("username"),function(e,t){e?(localStorage.setItem("request_token",t.oauth_token),localStorage.setItem("request_token_secret",t.oauth_token_secret),window.location.href="http://www.fitbit.com/oauth/authorize?oauth_token="+t.oauth_token+"&display=touch"):n.showMessage("Sorry, could not authorize with fitbit.\n  Failed to get fitbit request token")})}});return i});