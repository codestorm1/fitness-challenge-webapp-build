var Book=StackMob.Model.extend({schemaName:"book"}),Books=StackMob.Collection.extend({model:Book}),SMQItem=StackMob.Model.extend({schemaName:"smqitem"}),SMQItems=StackMob.Collection.extend({model:SMQItem}),Attraction=StackMob.Model.extend({schemaName:"attraction"}),Attractions=StackMob.Collection.extend({model:Attraction}),StackMobExamples={};StackMobExamples.debugCallback=function(e,t,n){return{success:function(n){e=e||"",console.debug("------- "+e+" success start-----");if(n){var r=new JSONFormatter(n.toJSON?n.toJSON():n,"pre");$("#results").text(n.toJSON||_.isObject(n)?r.formatJSON():n)}else $("#results").text("No response body. Check your Firebug/Developer Tools Javascript Console.");return t&&t(n),n},error:function(t,r){e=e||"",console.debug("------- "+e+" error start-----");if(r){var i=new JSONFormatter(r,"pre");$("#results").text(i.formatJSON())}else $("#results").text("No response body. Check your Firebug/Developer Tools Javascript Console.");return n&&n(r),r}}},StackMobExamples.createUser=function(e){var t=new StackMob.User({username:"Bruce Wayne",password:"imbatman",age:50});t.create(StackMobExamples.debugCallback("Creating User: Bruce Wayne"))},StackMobExamples.fetchUser=function(e){var t=new StackMob.User({username:"Bruce Wayne"});t.fetch(StackMobExamples.debugCallback("Reading User: Bruce Wayne"))},StackMobExamples.updateUser=function(e){var t=new StackMob.User({username:"Bruce Wayne",age:51});t.save(null,StackMobExamples.debugCallback("Updating User: Bruce Wayne to age 51"))},StackMobExamples.deleteUser=function(e){var t=new StackMob.User({username:"Bruce Wayne"});t.destroy(StackMobExamples.debugCallback("Delete User: Bruce Wayne"))},StackMobExamples.showLogin=function(){var e=new StackMob.User({username:"Bruce Wayne",password:"imbatman"});e.showLogin(!1,StackMobExamples.debugCallback("Logging in."),function(e){console.debug(e.toJSON())},function(e,t){console.debug(t)})},StackMobExamples.logout=function(){var e=new StackMob.User({username:"Bruce Wayne"});e.logout(StackMobExamples.debugCallback("Logging out."))},StackMobExamples.createBooks=function(){var e=["Lord of the Rings","Encyclopedia Brown","The Hatchet","All Quiet on the Western Front","Harry Potter 1","Harry Potter 2","Harry Potter 3","Harry Potter 4","Harry Potter 5","Harry Potter 6","Harry Potter 7"];_.each(e,function(e){var t=new Book({title:e,author:"Bruce Wayne"});t.create(StackMobExamples.debugCallback("Creating Book: "+e))})},StackMobExamples.deleteBooks=function(){var e=new Books;e.fetch(StackMobExamples.debugCallback("Fetching Books",function(){var t;while(t=e.pop())t.destroy(StackMobExamples.debugCallback("Deleting book: "+t.get("title")))}))},StackMobExamples.getQueryItems=function(){var e=new SMQItems;e.fetch(StackMobExamples.debugCallback("Getting all Test Objects"))},function(){$(document).ready(function(){$("#createOAuthUser").click(function(){var e=new StackMob.User({username:"oauthtestuser",password:"oauthtestpassword"});e.create({success:function(e){console.debug("USER CREATED")}})}),$("#user_create").click(function(){StackMobExamples.createUser()}),$("#user_read").click(function(){StackMobExamples.fetchUser()}),$("#user_update").click(function(){StackMobExamples.updateUser()}),$("#user_delete").click(function(){StackMobExamples.deleteUser()})})}.call(),function(){$(document).ready(function(){$("#login").click(function(){StackMobExamples.showLogin()})}),$(document).ready(function(){$("#logout").click(function(){StackMobExamples.logout()})})}.call(),function(){$(document).ready(function(){$("#book_createbooks").click(function(){StackMobExamples.createBooks()}),$("#book_delete").click(function(){StackMobExamples.deleteBooks()})})}.call(),function(){$(document).ready(function(){$("#smq_getall").click(function(){StackMobExamples.getQueryItems()}),$("#smq_createall").click(function(){for(var e=0;e<25;e++){var t=new SMQItem({number:e,numbers:[e,e+1,e+2,e+3],mod:e%5});t.create(StackMobExamples.debugCallback("Creating fake items to test"))}}),$("#smq_deleteall").click(function(){var e=new SMQItems;e.fetch(StackMobExamples.debugCallback("Deleting All SMQ Items",function(){var t;while(t=e.pop())t.destroy(StackMobExamples.debugCallback("Deleting: "+t.get("smqitem_id")))}))}),$("#smq_count").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.equals("number",15),e.count(t,StackMobExamples.debugCallback("Getting Item Number 15 Count"))}),$("#smq_equals").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.equals("number",15),e.query(t,StackMobExamples.debugCallback("Getting Item Number 15"))}),$("#smq_notequals").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.notEquals("number",15).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Number != 15"))}),$("#smq_isnull").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.isNull("number"),e.query(t,StackMobExamples.debugCallback("Getting Items with null number"))}),$("#smq_isnotnull").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.isNotNull("number"),e.query(t,StackMobExamples.debugCallback("Getting Items with non-null number"))}),$("#smq_lt").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.lt("number",5).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Number < 5"))}),$("#smq_lte").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.lte("number",5).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Number <= 5"))}),$("#smq_gt").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.gt("number",20).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Number > 20"))}),$("#smq_gte").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.gte("number",20).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Number >= 20"))}),$("#smq_mustbeoneof").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.mustBeOneOf("number",[1,5,10]).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Item Numbers 1, 5, 10"))}),$("#smq_orderByAsc").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Items in ascending number order"))}),$("#smq_orderByDesc").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.orderDesc("number"),e.query(t,StackMobExamples.debugCallback("Getting Items in descending number order"))}),$("#smq_range").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.setRange(5,9).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting Items second page of results "))}),$("#smq_gte_lte_expression").click(function(){var e=new SMQItems,t=new StackMob.Collection.Query;t.gte("number",3).lte("number",5).orderAsc("number"),e.query(t,StackMobExamples.debugCallback("Getting 3 <= number <= 5"))})})}.call(),function(){function e(e){var t=e.target.files;for(var n=0,r;r=t[n];n++){var i=new FileReader;i.onload=function(e){return function(t){var n=t.target.result.substring(t.target.result.indexOf(",")+1,t.target.result.length),r=e.name,i=e.type,s=new StackMob.User({username:"Bruce Wayne"});s.fetch({success:function(e){e.setBinaryFile("pic",r,i,n),e.save(StackMobExamples.debugCallback("Saving the binary file to the user"))}})}}(r),fileContent=i.readAsDataURL(r)}}$(document).ready(function(){document.getElementById("files").addEventListener("change",e,!1)})}.call(),function(){$(document).ready(function(){$("#geo_saveattractions").click(function(){var e=[{name:"Golden Gate Bridge",location:{lon:-122.419416,lat:37.77493}},{name:"Coit Tower",location:{lon:-122.478532,lat:37.819586}},{name:"Fisherman's Wharf",location:{lon:-122.415805,lat:37.808224}},{name:"Sunset and Noriega",location:{lon:-122.495327,lat:37.753649}},{name:"19th and Noriega",location:{lon:-122.47653,lat:37.754226}},{name:"Sunset and Taraval",location:{lon:-122.494726,lat:37.742112}},{name:"19th and Taraval",location:{lon:-122.475758,lat:37.743164}},{name:"Inside Box",location:{lon:-122.48374,lat:37.749815}}];_.each(e,function(e){var t=new Attraction(e);t.save(null,StackMobExamples.debugCallback("Saving: "+e.name))})}),$("#geo_getattractions").click(function(){var e=new Attractions;e.fetch(StackMobExamples.debugCallback("Getting all attractions"))}),$("#geo_clearallattractions").click(function(){var e=new Attractions;e.fetch(StackMobExamples.debugCallback("Getting all attractions to Delete",function(){var t;while(t=e.pop())t.destroy(StackMobExamples.debugCallback("Deleting attraction"))}))}),$("#geo_mustbenear").click(function(){var e=new Attractions,t=new StackMob.Collection.Query;t.mustBeNearMi("location",new StackMob.GeoPoint(37.742112,-122.494726),1),e.query(t,StackMobExamples.debugCallback("Getting attractions 1 mile near X"))}),$("#geo_iswithin").click(function(){var e=new Attractions,t=new StackMob.Collection.Query;t.mustBeNearMi("location",new StackMob.GeoPoint(37.742112,-122.494726),1),e.query(t,StackMobExamples.debugCallback("Getting attractions 1 mile within X"))}),$("#geo_iswithinbox").click(function(){var e=new Attractions,t={lon:-122.475758,lat:37.743164},n={lon:-122.495327,lat:37.753649},r=new StackMob.Collection.Query;r.isWithinBox("location",t,n),e.query(r,StackMobExamples.debugCallback("Getting attractions within box"))})})}.call(),function(){$(document).ready(function(){var e=function(e){FB.showLogin(function(t){t.authResponse?(console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(e){console.log("Good to see you, "+e.name+".")}),e(t.authResponse)):console.log("User cancelled login or did not fully authorize.")},{scope:"email"})},t=function(){var t=function(e){var t=e.accessToken,n=new StackMob.User({username:"youruser@theiremail.com"});n.createUserWithFacebook(t)};e(t)},n=function(){var t=function(e){var t=e.accessToken,n=new StackMob.User;n.loginWithFacebookToken(t,!1)};e(t)},r=function(){var t=function(e){var t=new StackMob.User;t.linkUserWithFacebook(e.accessToken,!1)};e(t)};$("#createUserFB").click(t),$("#loginFB").click(n),$("#linkFB").click(r)})}.call(),function(){$(document).ready(function(){$("#cc_helloworld").click(function(){StackMob.cc("hello_world",{},StackMobExamples.debugCallback("Testing CC"))})})}.call(),function(){$(document).ready(function(){$("#cc_withparams").click(function(){var e={second_string:1,first_string:2};StackMob.cc("has_params_method",e,StackMobExamples.debugCallback("Testing CC with params"))})})}.call(),function(){$(document).ready(function(){var e=StackMob.Model.extend({schemaName:"message"}),t=StackMob.Collection.extend({model:e});$("#rel_createuser").click(function(){var e=new StackMob.User({username:"Mr. Rogers",password:"hello"});e.create(StackMobExamples.debugCallback("Creating user Mr. Rogers."))}),$("#rel_deleteuser").click(function(){var e=new StackMob.User({username:"Mr. Rogers"});e.destroy(StackMobExamples.debugCallback("Delete Mr. Rogers"))}),$("#rel_appendandcreate").click(function(){var t=new StackMob.User({username:"Mr. Rogers"});t.fetch(StackMobExamples.debugCallback("Fetching Mr. Rogers",function(){var n=[];for(var r=0;r<10;r++)n.push(new e({content:"Hello World "+r+"!"}));t.appendAndCreate("messages",n,StackMobExamples.debugCallback('Sending 10 messages "Hello World [int]" and creating/appending to Mr. Rogers "messages" field.',function(){var e=new StackMob.Collection.Query;e.equals("username","Mr. Rogers").setExpand(1);var t=new StackMob.Users;t.query(e,StackMobExamples.debugCallback("Fetching expanded Mr. Rogers to show that he now has 10 messages"))}))}))}),$("#rel_getmsgs").click(function(){var e=new t;e.fetch(StackMobExamples.debugCallback("Fetching all messages to show they were created."))}),$("#rel_deletemsgs").click(function(){var e=new t;e.fetch(StackMobExamples.debugCallback("Getting all messages",function(){var t;while(msg=e.pop())msg.destroy(StackMobExamples.debugCallback("Deleting message: "+msg.get("message_id")))}))}),$("#rel_appendandsave").click(function(){var t=new StackMob.User({username:"Mr. Rogers"});t.fetch(StackMobExamples.debugCallback("Fetching Mr. Rogers",function(){var n=new e({content:"New Message"});n.create(StackMobExamples.debugCallback("Creating Message now.",function(){t.appendAndSave("messages",[n.get("message_id")],StackMobExamples.debugCallback("Appending and Saving"))}))}))}),$("#rel_deleteandsave").click(function(){var e=new StackMob.User({username:"Mr. Rogers"});e.fetch(StackMobExamples.debugCallback("Fetching Mr. Rogers",function(){e.deleteAndSave("messages",e.get("messages"),StackMob.SOFT_DELETE,StackMobExamples.debugCallback("Deleting references to messages only.",function(){e.fetch(StackMobExamples.debugCallback("Showing Mr. Rogers after soft deleting message references.  Messages should still exist in datastore"))}))}))}),$("#rel_harddeleteandsave").click(function(){var e=new StackMob.User({username:"Mr. Rogers"});e.fetch(StackMobExamples.debugCallback("Fetching Mr. Rogers",function(){e.deleteAndSave("messages",e.get("messages"),StackMob.HARD_DELETE,StackMobExamples.debugCallback("Deleting references to messages only.",function(){e.fetch(StackMobExamples.debugCallback("Showing Mr. Rogers after soft deleting message references.  Messages should still exist in datastore"))}))}))}),$("#rel_getuser").click(function(){var e=new StackMob.User({username:"Mr. Rogers"});e.fetch(StackMobExamples.debugCallback("Fetching Mr. Rogers"))}),$("#rel_getuserexpanded").click(function(){var e=new StackMob.User({username:"Mr. Rogers"});e.fetchExpanded(1,StackMobExamples.debugCallback("Fetching Mr. Rogers"))})})}.call();